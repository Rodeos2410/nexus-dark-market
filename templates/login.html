{% extends "base.html" %}

{% block title %}–í—Ö–æ–¥{% endblock %}

{% block content %}
<div class="auth-center">
    <div class="auth-card">
        <div class="product-card">
            <h1 class="rainbow-text">Nexus Dark</h1>
            
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div style="color: red; text-align: center; margin: 10px;">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <form method="POST">
                <h2>–í—Ö–æ–¥</h2>
                
                <input type="text" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" id="username" name="username" 
                       value="{{ username if username else '' }}" required>
                
                {% if not show_code_input %}
                <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" id="password" name="password" required>
                {% else %}
                <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" id="password" name="password" 
                       value="***" readonly style="background-color: #f0f0f0;">
                {% endif %}
                
                {% if show_code_input %}
                <div style="margin: 15px 0; padding: 10px; background-color: #e8f5e8; border-radius: 5px; text-align: center;">
                    <p style="margin: 0; color: #2d5a2d; font-weight: bold;">üì± –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram</p>
                    <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9em;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞</p>
                </div>
                <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" id="auth_code" name="auth_code" 
                       maxlength="6" pattern="[0-9]{6}" required style="text-align: center; font-size: 1.2em; letter-spacing: 2px;">
                {% endif %}
                
                <br>
                <button type="submit" class="button">
                    {% if show_code_input %}–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ–¥{% else %}–í–æ–π—Ç–∏{% endif %}
                </button>
                
                {% if not show_code_input %}
                <a href="{{ url_for('register') }}" class="rainbow-text-small">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% else %}
                <a href="{{ url_for('login') }}" class="rainbow-text-small">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</a>
                {% endif %}
            </form>
        </div>
    </div>
</div>
{% endblock %}