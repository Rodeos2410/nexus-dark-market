# üîê –°–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞. –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ —É–∫–∞–∑–∞–Ω–∏–∏ Telegram username –∏ –¥–µ–ª–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π.

## üéØ –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

### ‚ùå **–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å Telegram username
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –Ω–∞–ª–∏—á–∏—è username –≤ Telegram
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## ‚úÖ –†–µ—à–µ–Ω–∏–µ - —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤

### üîë **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:**
1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π 32-—Å–∏–º–≤–æ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏** - —Ç–æ–∫–µ–Ω –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Å—Å—ã–ª–∫—É `https://t.me/NexusDarkBot?start={token}`
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ chat_id** - —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö:
```python
class User(UserMixin, db.Model):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    telegram_setup_token = db.Column(db.String(100), nullable=True, unique=True)
    telegram_chat_id = db.Column(db.String(50), nullable=True)
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤:
```python
def generate_telegram_setup_token() -> str:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"""
    alphabet = string.ascii_letters + string.digits
    return ''.join(secrets.choice(alphabet) for _ in range(32))
```

### API Endpoint:
```python
@app.route('/telegram/setup-link')
@login_required
def get_telegram_setup_link():
    token = get_or_create_telegram_setup_token(current_user.id)
    setup_link = f"https://t.me/NexusDarkBot?start={token}"
    return jsonify({'success': True, 'setup_link': setup_link})
```

### Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞:
```python
if text.startswith('/start'):
    start_param = text.split(' ', 1)[1] if ' ' in text else None
    if start_param:
        user = User.query.filter_by(telegram_setup_token=start_param).first()
        if user:
            user.telegram_chat_id = chat_id
            db.session.commit()
```

## üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ù–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ—Ñ–∏–ª—è:
- ‚ùå –£–±—Ä–∞–Ω–æ –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ Telegram username
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üì± –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π —Å—Ç–∞—Ç—É—Å: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ/–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### JavaScript —Ñ—É–Ω–∫—Ü–∏—è:
```javascript
function openTelegramSetup() {
    fetch('/telegram/setup-link')
        .then(r => r.json())
        .then(d => {
            if (d.success) {
                window.open(d.setup_link, '_blank');
                showNotification('–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Telegram –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...', 'info');
            }
        });
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤:
- **32 —Å–∏–º–≤–æ–ª–∞** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω —É–Ω–∏–∫–∞–ª–µ–Ω
- **–°–ª—É—á–∞–π–Ω–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- **–û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ—Å—Ç—å** - —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ, –Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∞–∫–∫–∞—É–Ω—Ç—É

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π:
- –¢–æ–∫–µ–Ω –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—É–∂–æ–π —Ç–æ–∫–µ–Ω
- –¢–æ–∫–µ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- ‚úÖ **–û–¥–∏–Ω –∫–ª–∏–∫** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ **–ë–µ–∑ username** - –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å Telegram username
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ** - –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –ø–ª–∞–Ω—à–µ—Ç–µ
- ‚úÖ **–ë–µ–∑ –æ—à–∏–±–æ–∫** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ** - –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- ‚úÖ **–ú–µ–Ω—å—à–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —Å–∞–º–∏
- ‚úÖ **–í—ã—à–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—è** - –ø—Ä–æ—â–µ = –±–æ–ª—å—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å–æ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–æ–π:
- –°—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å username –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±
- Webhook –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Å–ø–æ—Å–æ–±–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
python test_token_system.py
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í–æ–π–¥–∏—Ç–µ –≤ –ª—é–±–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ñ–∏–ª—å
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üì± –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Telegram —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
6. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start –≤ –±–æ—Ç–µ
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞ '–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ'

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å Telegram username
- –í–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- –û–¥–∏–Ω –∫–ª–∏–∫ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ù–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å username
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤ —Ä–µ—à–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã:

1. **–£–ø—Ä–æ—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É** - –æ–¥–∏–Ω –∫–ª–∏–∫ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —à–∞–≥–æ–≤
2. **–£–±–∏—Ä–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –Ω–µ –Ω—É–∂–µ–Ω Telegram username
3. **–ü–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–£–ª—É—á—à–∞–µ—Ç UX** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
5. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

–¢–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å—Ç–∞–ª–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω–æ–π –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π! üöÄ



